import{d as T,r as m,l as p,m as w,x as E,o as c,c as u,a as o,y as x,F as _,n as C,k as R,w as N,p as y,e as B}from"./index-5c31601d.js";import{_ as S}from"./plugin-vue_export-helper-c27b6911.js";const k=s=>(y("data-v-efd1c0e4"),s=s(),B(),s),A={class:"tag-box"},V=k(()=>o("div",{class:"label"},"标签输入框:",-1)),D={class:"content"},F=["id"],K={class:"tag-box"},P=["onClick"],$=T({__name:"tagInput",setup(s){const t=m({contentId:"content1",currentText:"",currentTagId:null,savedRange:null}),r=p(),I=m([{name:"标签一",id:1},{name:"标签二",id:2},{name:"标签三",id:3}]),i=p(),f=[{value:"1",label:"Level one 1",children:[{value:"1-1",label:"Level two 1-1",children:[{value:"1-1-1",label:"Level three 1-1-1"}]}]},{value:"2",label:"Level one 2",children:[{value:"2-1",label:"Level two 2-1",children:[{value:"2-1-1",label:"Level three 2-1-1"}]},{value:"2-2",label:"Level two 2-2",children:[{value:"2-2-1",label:"Level three 2-2-1"}]}]},{value:"3",label:"Level one 3",children:[{value:"3-1",label:"Level two 3-1",children:[{value:"3-1-1",label:"Level three 3-1-1"}]},{value:"3-2",label:"Level two 3-2",children:[{value:"3-2-1",label:"Level three 3-2-1"}]}]}];w(()=>{document.addEventListener("selectionchange",g)});const v=n=>{t.currentText=n.innerText},h=n=>{t.savedRange||(r.value.focus(),g());const e=document.createElement("span");if(e.innerText=`<${n}>`,t.savedRange.commonAncestorContainer.parentElement.nodeName==="SPAN")return;t.savedRange.deleteContents(),t.savedRange.insertNode(e);const a=r.value;t.currentText=a.innerText;const l=window.getSelection(),d=t.savedRange.cloneRange();d.setStartAfter(e),d.collapse(!1),l.removeAllRanges(),l.addRange(d)},g=()=>{const n=window.getSelection(),e=n.rangeCount>0?n.getRangeAt(0):null;e&&e.commonAncestorContainer.ownerDocument.activeElement.id===t.contentId&&(t.savedRange=e)},b=n=>{if(t.currentTagId){const e=document.getElementById(t.currentTagId);r.value.removeChild(e),t.currentTagId=null,n.preventDefault(),v(n.target)}},L=n=>{if(n.target.nodeName==="SPAN")t.currentTagId=n.target.id;else if(t.currentTagId){const a=document.getElementById(t.currentTagId);a.className="",t.currentTagId=null}else t.currentTagId=null};return(n,e)=>{const a=E("el-tree-select");return c(),u(_,null,[o("div",A,[V,o("div",D,[o("div",{class:"tag-input",ref_key:"root",ref:r,id:t.contentId,onInput:e[0]||(e[0]=l=>v(l.target)),onKeydown:e[1]||(e[1]=x(l=>b(l),["delete"])),onClick:e[2]||(e[2]=l=>L(l))},null,40,F),o("div",K,[(c(!0),u(_,null,C(I,l=>(c(),u("span",{class:"one-tag",onClick:d=>h(l.name)},N(l.name),9,P))),256))])])]),R(a,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),data:f,"show-all-levels":!0},null,8,["modelValue"])],64)}}}),U=S($,[["__scopeId","data-v-efd1c0e4"]]);export{U as default};
